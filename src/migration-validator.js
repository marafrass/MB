/**\n * Migration Validator for Murder Board\n * Provides tools to validate and debug data migrations\n */\n\nexport class MigrationValidator {\n  /**\n   * Validate board data integrity after migration\n   * @param {Object} boardData - The board data to validate\n   * @returns {Object} Validation result with status and any issues found\n   */\n  static validateBoardDataIntegrity(boardData) {\n    const issues = [];\n    const warnings = [];\n    const itemCount = boardData.items?.length || 0;\n    const connectionCount = boardData.connections?.length || 0;\n\n    // Check for orphaned connections\n    if (boardData.connections && boardData.items) {\n      const itemIds = new Set(boardData.items.map(i => i.id));\n      for (const conn of boardData.connections) {\n        if (!itemIds.has(conn.fromItem)) {\n          issues.push(`Connection references non-existent item: ${conn.fromItem}`);\n        }\n        if (!itemIds.has(conn.toItem)) {\n          issues.push(`Connection references non-existent item: ${conn.toItem}`);\n        }\n      }\n    }\n\n    // Check for items without critical fields\n    if (boardData.items) {\n      for (const item of boardData.items) {\n        if (!item.id) issues.push(`Item missing ID`);\n        if (!item.type) issues.push(`Item ${item.id} missing type`);\n        if (typeof item.x !== 'number') warnings.push(`Item ${item.id} has invalid x coordinate`);\n        if (typeof item.y !== 'number') warnings.push(`Item ${item.id} has invalid y coordinate`);\n        \n        // Check for migration status\n        if (item.type === 'Image' && item.data?.preset && !item.data?._migrationApplied && (item.data?.width || item.data?.height)) {\n          warnings.push(`Image item ${item.id} may need migration (has preset but not marked as migrated)`);\n        }\n      }\n    }\n\n    return {\n      isValid: issues.length === 0,\n      itemCount,\n      connectionCount,\n      issues,\n      warnings,\n      timestamp: new Date().toISOString(),\n    };\n  }\n\n  /**\n   * Check migration status of all image items\n   * @param {Object} boardData - The board data to check\n   * @returns {Object} Migration status report\n   */\n  static getMigrationStatus(boardData) {\n    const report = {\n      totalImages: 0,\n      migratedImages: 0,\n      unmigrated: [],\n      withBackup: 0,\n      missingBackup: 0,\n    };\n\n    if (!boardData.items) return report;\n\n    for (const item of boardData.items) {\n      if (item.type === 'Image') {\n        report.totalImages++;\n        \n        if (item.data?._migrationApplied) {\n          report.migratedImages++;\n          \n          if (item.data?._presetBackup) {\n            report.withBackup++;\n          } else {\n            report.missingBackup++;\n          }\n        } else {\n          report.unmigrated.push({\n            id: item.id,\n            label: item.label,\n            hasPreset: !!item.data?.preset,\n            hasDimensions: !!item.data?.width && !!item.data?.height,\n          });\n        }\n      }\n    }\n\n    return report;\n  }\n\n  /**\n   * Create a detailed migration report for logging\n   * @param {Object} boardData - The board data to analyze\n   * @returns {string} Formatted report\n   */\n  static generateMigrationReport(boardData) {\n    const integrity = this.validateBoardDataIntegrity(boardData);\n    const migration = this.getMigrationStatus(boardData);\n\n    let report = '\\n%câ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•';\n    report += '\\n%c  MURDER BOARD MIGRATION VALIDATION REPORT';\n    report += '\\n%câ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•';\n    report += '\\n\\n%cğŸ“Š DATA INTEGRITY';\n    report += `\\n  â€¢ Items: ${integrity.itemCount}`;\n    report += `\\n  â€¢ Connections: ${integrity.connectionCount}`;\n    report += `\\n  â€¢ Status: ${integrity.isValid ? 'âœ… VALID' : 'âŒ ISSUES FOUND'}`;\n\n    if (integrity.issues.length > 0) {\n      report += '\\n\\n%cğŸ”´ CRITICAL ISSUES:';\n      integrity.issues.forEach(issue => {\n        report += `\\n  âœ— ${issue}`;\n      });\n    }\n\n    if (integrity.warnings.length > 0) {\n      report += '\\n\\n%cğŸŸ¡ WARNINGS:';\n      integrity.warnings.forEach(warning => {\n        report += `\\n  âš  ${warning}`;\n      });\n    }\n\n    report += '\\n\\n%cğŸ–¼ï¸  IMAGE MIGRATION STATUS';\n    report += `\\n  â€¢ Total Images: ${migration.totalImages}`;\n    report += `\\n  â€¢ Migrated: ${migration.migratedImages}`;\n    report += `\\n  â€¢ With Backup: ${migration.withBackup}`;\n    report += `\\n  â€¢ Missing Backup: ${migration.missingBackup}`;\n\n    if (migration.unmigrated.length > 0) {\n      report += '\\n\\n%cğŸ“‹ UNMIGRATED IMAGES:';\n      migration.unmigrated.forEach(img => {\n        report += `\\n  â€¢ ${img.label || img.id}`;\n        report += `\\n    - Preset: ${img.hasPreset ? 'âœ“' : 'âœ—'}`;\n        report += `\\n    - Dimensions: ${img.hasDimensions ? 'âœ“' : 'âœ—'}`;\n      });\n    }\n\n    report += '\\n\\n%câ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•';\n    report += `\\n  Generated: ${new Date().toISOString()}`;\n    report += '\\n%câ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n';\n\n    return report;\n  }\n\n  /**\n   * Log migration report to console with styling\n   * @param {Object} boardData - The board data to analyze\n   */\n  static logMigrationReport(boardData) {\n    const report = this.generateMigrationReport(boardData);\n    const colors = [\n      'color: #2196F3; font-weight: bold',    // Blue - Headers\n      'color: #2196F3; font-weight: bold',    // Blue - Headers\n      'color: #2196F3; font-weight: bold',    // Blue - Headers\n      'color: #673AB7; font-weight: bold',    // Purple - Sections\n      'color: #f44336; font-weight: bold',    // Red - Issues\n      'color: #FF9800; font-weight: bold',    // Orange - Warnings\n      'color: #2196F3; font-weight: bold',    // Blue - Image Status\n      'color: #FFB300; font-weight: bold',    // Gold - Unmigrated\n      'color: #2196F3; font-weight: bold',    // Blue - Footer\n      'color: #2196F3; font-weight: bold',    // Blue - Footer\n    ];\n    console.log(report, ...colors);\n  }\n}\n"